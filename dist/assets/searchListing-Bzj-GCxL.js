import{A as h}from"./constants-Cszep78z.js";async function m(t){try{const n=await fetch(`${h}/search?q=${encodeURIComponent(t)}&_bids=true`);if(!n.ok)throw new Error("Failed to fetch search results");const e=await n.json();return console.log("API Response with bids:",e),e.data||[]}catch(n){return console.error("Error fetching search results:",n),[]}}function p(t){const n=document.createElement("div");n.classList.add("relative","overflow-hidden","rounded-lg","group","shadow-md","transition-colors","duration-300","hover:shadow-lg");const e=document.createElement("a");e.href=`./productpage.html?listingId=${t.id}`,e.classList.add("block","h-full","w-full");const o=document.createElement("div");o.classList.add("h-64","w-full","relative","bg-cover","bg-center","transition-colors","duration-300"),t.media&&Array.isArray(t.media)&&t.media.length>0?o.style.backgroundImage=`url(${t.media[0].url})`:o.style.backgroundImage="url('https://via.placeholder.com/150')";const s=document.createElement("div");s.classList.add("absolute","inset-0","bg-customDYellow","opacity-0","transition-opacity","duration-300");const a=document.createElement("h1");a.textContent=t.title||"Untitled",a.setAttribute("title",t.title||"Untitled"),a.classList.add("absolute","bottom-0","left-0","w-full","bg-customDYellow","text-black","text-sm","font-bold","pt-8","py-2","px-4","rounded-t-lg","block","h-24","truncate");const l=t.bids&&t.bids.length>0?Math.max(...t.bids.map(u=>u.amount)):0,d=document.createElement("h2");d.textContent=l>0?`Highest Bid: $${l}`:"No bids yet",d.classList.add("absolute","bottom-2","px-4","md:text-sm","block");const r=document.createElement("div"),i=new Date(t.endsAt)-new Date,c=Math.ceil(i/(1e3*60*60*24));return r.textContent=c>1?`${c} days left`:c===1?"1 day left":"Ended",r.classList.add("absolute","top-2","right-2","bg-customBlue","text-white","text-xs","font-baloo","py-1","px-2","rounded"),e.appendChild(o),e.appendChild(s),e.appendChild(a),e.appendChild(d),e.appendChild(r),n.appendChild(e),n}async function f(){const t=document.getElementById("search-results");t.textContent="";const e=new URLSearchParams(window.location.search).get("q");if(!e){t.textContent="No search query provided.";return}const o=await m(e);o.length===0?t.textContent="No results found.":o.forEach(s=>{const a=p(s);t.appendChild(a)})}f();
